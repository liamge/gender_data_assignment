<heading>Introduction to CFD</heading><heading>Background</heading>Computational Fluid Dynamics (CFD) is a computer tool for simulating the behaviour of problems involving fluid flow, heat transfer and other physical processes. CFD achieves this by solving the equations of fluid flow over a region of interest. CFD can be used to evaluate the performance of a component during its design or it can be used to assess difficulties with existing designs and lead to their improvement. <heading>The process</heading>The process of forming a CFD simulation is divided into four components: <figure/>The first stage is in creating a geometry using ANSY Workbench which is needed in order to produce the required mesh. The workbench provides a number of drawing tools that are usually found in a CAD program for designing the solid. Once the geometry is made a surface mesh can be defined and produced. The second stage is that of the pre-processor (using CFX-Pre) which allows the user to define the physics of the problem and create as well as tune a mesh to improve computational quality, accuracy and speed. Physics definition allows the specification of fluid properties and other materials in contact with it. The third stage involves the solver (sing CFX-Solver), which is a collection of various algorithms and numerical techniques for performing the computational analysis of the previously specified problem. The solver converts the partial differential and boundary condition equations into a group of algebraic equations. The solutions to the boundary conditions are found by way of iteration. The final stage is the post processor which enables the graphical illustration of the flow problem. This can take the form of contours, streamlines, vector plots and various other illustrations of the flow features. At this stage, the user is also able to tune the mesh, adjust boundary conditions and numerical parameters then view the results. <heading>Mathematics of CFD</heading>The physics of every fluid flow and heat transfer problem is governed by three main equations, namely: mass conservation, momentum conservation and energy conservation, which may be expressed mathematically for the given initial and boundary conditions. CFD uses the finite volume technique as its solution method. The solution obtained in CFD analysis for a flow problem represents the values of physical variables of the fluid flow, which is achieved by adjusting the relevant equations, dividing the fluid domain into a large number of cells or control volumes (called the mesh) and various other operations. <heading>Tutorial 1</heading>The first stage involves creation of the geometry and meshing for the Static Mixer, which is carried out in ANSYS Workbench. The solid is created (see Fig 1.1) using drawing objects contained in the Tree View panel and the 2D geometry is then revolved to create the 3D solid. Material can also be added on different planes by creating new sketches on the appropriate plane axis. Once the geometry is created, the mesh (Fig 1.2) can be set up in CFX-Mesh. This is carried out by first defining 2D regions of the geometry which are later, using CFX-Pre, assigned boundary conditions. In this tutorial 3 regions were defined: inlet1, inlet2 and outlet. The next stage involves setting up the mesh by defining the size for the elements of the mesh. This example used a (coarse) spacing of 0.3 for the mesh. Finally, the volume mesh is generated and saved for use in CFX-Pre. <figure/><figure/>The geometry can then be imported into CFX-Pre which enables the user to specify the physics of the problem; including type of fluid, flow parameters and boundary conditions. Once the problem has been defined a definition file is written which is required for the CFD analysis in CFX-Solver. Solver calculates the solution by way of iteration where successive iterations will produce more accurate solutions, this is called convergence (Fig 1.3). <figure/>A results file is created once the solver has finished the analysis, which is then loaded into CFX-Post for viewing in graphical form. The flow pattern within the static mixer can be viewed by creating a point (which can be positioned anywhere within the mixer) for the origin of a streamline within the mixer. Different variables can be viewed such as pressure and temperature. The following streamline flow pattern (Fig 1.4) is for temperature, where water enters the inlet pipe at a high temperature (red) and leaves at a colder temperature (blue): <figure/><figure/>A Slice Plane can is also created to view the flow pattern using different variables (temp. pressure etc.) at a cross section through the mixer, which is done by creating a new plane and defining its position using co-ordinates (Point and Normal method is used). The position of the plane can be re-adjusted using picking mode. Once parameters are defined the flow is made visible (Fig 1.6). Contours can also be viewed, which allow the user to more easily visualise points of equal values (or boundaries between different values/colours). The plot can then be animated so that the flow sweeps the geometry of the mixer (inlet to outlet). This is done using animation editor, which allows the user to define number of frames (minimum of two required) including details such as plane starting position, temperature range and number of intermediate frames (where more frames increase duration of the animation clip). This file is then saved in MPEG format and is therefore viewable using Windows Media PlayerÂ© (see Fig 1.7). <figure/><heading>Tutorial 2</heading>This tutorial modifies the geometry and mesh that were previously created. A refined mesh is created by reducing the maximum spacing and an inflated boundary is produced to provide a better resolution of the velocity near the wall therefore improving accuracy for the pipe geometry. It can be seen in Figure 2.1 that the new mesh is finer than the one initially created. <figure/><figure/>The next stage of the tutorial modifies the original geometry. This includes changing the pipe radius (to 0.4m) using the dimensioning feature and extending the outlet pipe. The extension requires the application of revolve and extrude features. Since these operations take place at the end of the outlet pipe a new plane is created and a corresponding sketch to provide the required reference for the new extrusions. Figure 2.2 shows the modified geometry. The latter part of the tutorial updates the geometry in CFX-Mesh so that the mesh corresponds to the modified geometry. The new mesh is imported into CFX-Pre under general mode (for more complex problems). Since the physics for this simulation is similar to that used in Tutorial 1 the same settings are used by importing the relevant CCL file. The solver is then set for the new mesh with slight modifications to the parameters to provide greater solution accuracy. To achieve this increased number of iterations are used (solver time is increased). A slice plane is created (Fig 2.3) and compared to the slice created for the mesh in Tutorial 1. The main differences are 1) the inflated layer has produced prismatic elements that appear as rectangles around the edges; 2) more line because slice intersects more mesh elements; 3) smoother curve as the new mesh represents the geometry better. <figure/><figure/><figure/>The inflated elements can be viewed in 3D by creating a volume. The volume is defined (point and radius) and elements contained in this volume can be made visible (Fig 2.4). Separate volumes are created to view the tetrahedral and prismatic elements. Inflated elements on main body of the mixer can also be made viewable by creating a slice through cross section of the mixer (Fig 2.5). <heading>Tutorial 3</heading>This tutorial produces an injection mixer pipe. The main geometry is created using the sweep operation which uses two schemes: one defines the profile to be swept and the other defines the path through which the profile is swept. A side pipe is created by adding a new plane based upon the ZX plane (offset). The circle is extruded into the main pipe to produce the geometry in Fig 3.1. <figure/><figure/>The first stage in creating the mesh is to set up 2D regions. Regions set up for the pipe are side inlet, main inlet and outlet. The mesh spacing is then set using body spacing to value of 0.25 m. For the side pipe a finer mesh is desired since flow here is smaller than max. body spacing. To produce a finer mesh for the side pipe, a face spacing of 0.05 is set for this region (Fig 3.2). Finally, since velocity gradients near pipe wall can greatly vary, inflated layers are produced for this region. <figure/><figure/><figure/>The mesh is now imported into CFX-Pre. First, an expression for viscosity as a function of temperature is created which is used to modify properties of water. A list of expressions is made using expression editor which can be plotted and evaluated. Properties of water are then modified using these expressions and a domain is created defining the physics and fluid model to be used. Boundary conditions can then be created for side inlet, main inlet and outlet regions of the pipe (Fig 3.3). The solver is then set for a maximum number of 50 iterations and initiated. Once solver is complete, CFX-Post is used to simulate flow. A streamline to examine velocity from main inlet is first created. It can be seen that flow tends to re-circulate near bottom of the vertical section of the main pipe (Fig 3.4). In order to investigate how well fluid from the side inlet mixes with fluid from main inlet, a streamline with constant colour is created. A modified duplicate of the streamline is also created for flow starting at the side inlet. The result is shown in Fig 3.5. <heading>Tutorial 5</heading>In this tutorial a geometry and mesh is created for a simulation of flow over a vehicle. The shape of the blunt body is drawn using features from the draw menu and the solid is generated by extrusion to a specific depth (Fig 5.1). A rectangular box is then created around the blunt body to form the region of flow. The blunt body must be frozen to avoid merging of the two solids and the blunt body can then be cut from the rectangle using Create > Body Operation (see Fig 5.2) <figure/><figure/>Once the geometry is created, the mesh can be created. The first step is to set up regions for defining boundaries later in CFX-Pre. Six regions are defined of which is a separate region for the blunt body to allow local visualisation and mesh control. Mesh spacing for the rectangular face is then defined in the normal way and a finer mesh is set up around the surfaces of the blunt body (as this is the region of interest) by inserting a Face Spacing for the 'Body', region as shown in Fig 5.3. <figure/>A thin layer of prismatic elements (5 layers) is then produced around the external surface of the body and ground using the Inflation feature. However, it is found that the specified number of inflated layers is not produced (see Fig 5.5). This is because the gap between body and ground is only 2 elements thick and does not accommodate the number of required layers. This problem is overcome using the Surface Proximity feature which detects close surfaces and refines the mesh in this region to minimum number of mesh elements enabling a higher quality mesh for the geometry (see Fig 5.6). Once required settings are made the mesh can be generated. <figure/><figure/><figure/>The mesh is now imported into CFX-Pre and a turbulent/isothermal flow domain for the body is created. A union between two regions requiring a free slip wall boundary condition is made for regions Free1 and Free2, and boundary conditions for the remaining 2D regions created. The top and side surfaces use free slip wall boundaries and the blunt body surface uses a no slip boundary condition while the bottom surface uses an adiabatic no-slip wall condition. The solver is then set on high resolution for a maximum number of 60 iterations. At this stage the solving process can be divided between two processors to (parallel solver) to reduce the duration of the solving process. <figure/><figure/>CFD results calculated using half of geometry due to the symmetry. But for visualisation purposes full geometry can be used by creating an Instance Transform (Fig 5.7). A vector plot also created to show velocity vectors behind the blunt body by creating a plane to locate region of interest (Fig 5.8). Finally, a surface plot of Yplus created to indicate closeness of first node to the wall (Fig 5.9) and Power Syntax Macro is used to evaluate variation of variables in the direction of the X-axis (Fig 5.10). <figure/><figure/><heading>Tutorial 14</heading>This tutorial focuses on use of CFX-Mesh features in fixing poor CAD geometry's to produce good quality mesh. The geometry used contains many bad surfaces and short edges. These features give surface mesh with poor angles and short faces will cause regions with very fine mesh (Fig 14.1). Such inconsistencies are automatically detected under errors, for this geometry there are 8 known errors. The initial step in improving the geometry is to create Virtual Faces to fix irregularities by combining several faces to make single faces. A means of ridding the geometry of short edges is the Virtual Edges feature, which merges existing edges. The effect of creating virtual edges is illustrated in the re-generated mesh (Fig 14.2). Another way to get rid of short edges is Short Edge Removal, which removes short edges by collapsing them to a single point. These adjustments result in a decrease in the number of errors detected and better quality mesh (Fig 14.3) <figure/><figure/><figure/>