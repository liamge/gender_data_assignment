<abstract><heading>SummarySummary</heading>This report is concerned with the design of discrete controllers, and the comparison of theoretical to simulated controllers. A basic First Order Plus Dead Time (FOPDT) system was selected to be controlled and various preliminary calculations were carried out to determine suitable values for system controller coefficients. Using these values, a proportional-only discrete controller, a PID discrete controller and a Dahlin controller were designed theoretically to control the system. These controllers were then simulated using the SDS simulator available at  URL ..ac.uk/cgi-bin/sds and their outputs with various values of controller gain were observed. It was noted that in general the outputs produced using the simulator matched well with what was expected from the theoretically calculated values. It was also noted that the Dahlin controller performed better overall than the PID discrete controller or the proportional only discrete controller, as it reached the correct final value very quickly and had no overshoot from this value. </abstract><heading>Introduction</heading><heading>Introduction</heading>Every system must be controlled in some way or another, but designing suitable controllers is not always an easy task. There are a variety of ways of designing controllers and this report seeks to investigate and compare some of the possible methods. The report is mainly concerned with the design of discrete controllers but some preliminary calculations based on analog control were required. Following these calculations, it was possible to select suitable values for a proportional only discrete controller, a PID discrete controller and a Dahlin controller. These values were then used with the SDS simulator in order to examine the behaviour of such controllers. Output graphs were generated with different controller gains to see the effect of varying this parameter on the different types of controller. The results obtained from the simulation were then compared to the behaviour predicted by the calculations carried out initially, as well as allowing for a comparison between the different types of controller. <heading>Background Information</heading><heading>Ziegler Nichols Values</heading><heading>Purpose</heading>When designing controllers, various parameters cannot be determined purely from the system equations and must be selected appropriately. For example, in a typical analog PID controller:  FORMULA  (1.1) This can be rearranged to show it has a gain of  FORMULA  (1.2) Note that Kc, τi and τD cannot be determined just from the system equation and therefore values must be selected using some appropriate method. Ziegler Nichols equations may be used to determine suitable values for these coefficients. Note that they are not based in theory and have been determined experimentally, but are generally accepted as providing sensible values for the coefficients in proportional, integral and derivative systems. <heading>Methods of Calculation</heading>There are two methods of determining Ziegler Nichols settings for a controller: the reaction curve method and the continuous oscillation method, which is the method used here. In order to determine the values using this method, the following steps are used: Consider the closed loop system with a proportional-only controller, i.e.  FORMULA , and find the value  FORMULA  where the system just continuously oscillates, with period Tu. Note that when the system just continuously oscillates, the phase of the forward path is - and the magnitude of the open loop gain is 1. Hence set  FORMULA  and solve to find (u (and hence Tu), then set  FORMULA  and solve to find Ku. Using the values found for Ku and Tu, substitute into the appropriate equations below to find suitable coefficient values for the controller type desired. The equations used with the values for Ku and Tu depend on the type of controller and are as follows. Proportional Only Controller:  FORMULA  (1.3) PI Controller:  FORMULA  (1.4) PID Controller:  FORMULA  (1.5) <heading>Jury's Stability Criteria</heading>Jury's stability criteria are the necessary and sufficient criteria for a discrete controller to be stable. In order that the system is stable, the characteristic equation, F(z) must have no roots on or outside the unit circle when plotted on a z-plane. Jury's stability criteria provide a simple way of checking this without actually plotting F(z). Firstly, the characteristic equation of a system is written in the form  FORMULA . If we consider only the simplest case, when the characteristic equation is of order 2 (i.e.  FORMULA ), then the following criteria are necessary and sufficient for system stability. Condition 1:  FORMULA . Condition 2:  FORMULA . Condition 3:  FORMULA . [1] Providing all three of these criteria are met, the system will be stable. <heading>Simple Backwards Differencing</heading>Simple backwards differencing is a method of converting an analog controller to a discrete controller. For an analog PID controller, the system may be specified as  FORMULA  (1.6)  FORMULA  (1.7) The discrete equivalent may be found by taking first backward differences:  FORMULA   FORMULA   FORMULA  (1.8) In z-transform terms,  FORMULA  (1.9) where  FORMULA ,  FORMULA  and  FORMULA . <heading>Dahlin Controller</heading>An alternative method of discrete controller design which is not based on analog systems at all is the Dahlin algorithm. First, note that they system equation for an FOPDT system with dead time NT and a zero-order hold is  FORMULA  (1.10) As a function of z,  FORMULA  (1.11) Equation 1.11 may be written more succinctly as  FORMULA  (1.12) The objective then is to obtain a closed-loop transfer function of the form  FORMULA  (1.13) where  FORMULA  and TCL is the closed-loop time constant. This means that the closed-loop response to a step input at the step point will have an exponential response with gain of unity after the same time delay as the process.  FORMULA  where Gc is controller gain,  FORMULA   FORMULA  (1.14) Hence the controller algorithm is given by  FORMULA  (1.15) A suitable value of TCL should be selected to give adequate controller performance by setting  FORMULA , i.e.  FORMULA . Note that the maximum value of Q (unity) occurs when TCL is zero; this is known as dead beat control and, while perfect in theory, is not used in practise as problems arise if process dynamics are not perfectly modelled. <heading>Preliminary Calculations</heading><heading>Process System</heading>The process to be controlled is an FOPDT system and therefore has Laplace transfer function given by  FORMULA  (2.1) In this particular system Kp, the steady state gain of the process, is 1 and td, the dead time, is 1s. The time constant, Tp, was calculated as follows: Author's University Card Number is , giving last 2 digits as 24.  FORMULA . <heading>Analog Control</heading><heading>Proportional Only Analog Controller</heading>Suppose that the process is controlled by an analog proportional-only controller, i.e. that  FORMULA , as shown in Figure 8.1. <figure/>It is possible to write an expression for the open loop gain of the system:  FORMULA  (2.2) Using the values specified in section 7 above, this can be further expanded to give an expression specific to this system.  FORMULA  (2.3) <heading>Ziegler Nichols Settings</heading>With the open loop gain of the system as given in equation 1.3 above, it is possible to calculate the coefficient Ku which can be used with the continuous oscillation method and Ziegler Nichols equations to find appropriate settings for the system. First we find the phase part of the open loop gain:  FORMULA  For continuous oscillation, phase is - radians, i.e.  FORMULA . This can be solved iteratively for (u, the frequency at which the control loop just continuously oscillates. To solve the equation iteratively, a spreadsheet was used varying (u and tracking the value of  FORMULA  to get it as close to zero as possible. The results are shown in Table 8.1 below, with the best value to two decimal places ((u of 1.84 rad s -1) shown in bold. Using the equation  FORMULA  and substituting the value for (u allows Tu, the period of the system at this frequency, to be found. In this case, Tu = 3.41s. <table/>Referring again to equation 1.3, the magnitude part of the open loop gain can be found by  FORMULA . For just continuous oscillation, the magnitude of the gain must be exactly unity, i.e.  FORMULA , which can be solved using the value for ωu found above to give the controller gain at which the system just continuously oscillates. Recall that ωu, was found to be 1.84 rad s -1, hence the value of Ku is given by  FORMULA , i.e. Ku is approximately 3.74. With these coefficient values, it is possible to calculate the Ziegler-Nichols settings for the system. As only proportional control is used, the calculation is very simple and requires only one equation, namely equation 1.3. Substituting the value of Ku found above gives a value for Kc of  FORMULA . <heading>Final Value of c(t)</heading>The value calculated for Kc above can be used with the Laplace transform Final Value Theorem to find the final value of c(t). Here we consider the response to a step increase of 0 to 1 in r(t) applied at time 0 seconds. The Final Value Theorem states  FORMULA  (2.4) Hence,  FORMULA . This means that  FORMULA  which, with the value of Kc established above, gives a final value for c(t) of  FORMULA  or approximately 0.65. <heading>Discrete Control</heading><heading>Proportional Only Discrete Controller</heading>Suppose now that the process is controlled by a discrete proportional-only controller, i.e. that  FORMULA , as shown in Figure 9.1. <figure/>As with the analog system, it is possible to write an expression for the open loop gain of the system.  FORMULA  (2.5) Using values specified in section 7 above and choosing a sampling interval, T, of 1s, this can be expanded to give an expression for this particular system.  FORMULA  (2.6) <heading>Jury's Stability Criterion</heading>Jury's Stability Criterion can be used to determine the maximum value of Kc which allows for a stable system, here referred to as KcMAX. Using equation 1.7 above, the characteristic equation for the system can be written as  FORMULA  (2.7) This gives coefficients of  FORMULA ,  FORMULA  and  FORMULA . Note that the characteristic equation is of order 2 and therefore the conditions laid out in section 4 are the necessary and sufficient criteria for system stability. From condition 1,  FORMULA  for system stability. Solving for Kc implies that  FORMULA . From condition 2,  FORMULA  for system stability. Solving for Kc implies that  FORMULA . Finally, from condition 3,  FORMULA . Solving for Kc implies that  FORMULA . Combining the solutions for these conditions gives the inequality  FORMULA  for a stable system. Therefore, the largest possible value of Kc for stability is  FORMULA . Note that this is considerably smaller than the value for an analog system found in section 8.2 (recall  FORMULA ). <heading>Final Value of c(t)</heading>Using the same value of Kc as in section 8.2 above, the Final Value Theorem can be used to find the final value of c(t). Noting that c(nT) is the sampled value sequence of c(t), the z-transform version of the Final Value Theorem may be written <figure/>(2.8) Hence,  FORMULA .  FORMULA . This means that  FORMULA  which, with the value of Kc established above, gives a final value for c(t) of  FORMULA  or approximately 0.65. Note that this is exactly the same as in section 8.3 above, meaning that the final value of c(t) is completely unaffected by sampling. <heading>PID Discrete Controller - Ziegler Nichols & Backward Differencing</heading>Using the values for Ku and Tu found in section 8.2 above (found using the continuous oscillation method), it is possible to find suitable coefficients for a PID controller. The relevant Ziegler Nichols equations are given in equations 1.5, which give values of  FORMULA ,  FORMULA  and  FORMULA . Using the simple backward differencing method as described in section 5, the controller can be described in the form of equation 1.11. Substituting in values of Kc, (i and (D as found above, and a sampling interval  FORMULA ,  FORMULA ,  FORMULA  and  FORMULA . Hence the discrete version of the controller equation may be written  FORMULA  (2.9) <heading>PID Discrete Controller - Dahlin Algorithm</heading>To create a Dahlin controller, equation 1.15 is used with the closed loop constant equal to the open loop time constant (i.e.  FORMULA ),  FORMULA , a sampling interval  FORMULA  and a process gain of 1 as described in section 7. This gives a controller gain of  FORMULA  (2.10) which can be simplified to  FORMULA  (2.11) <heading>Computer Work</heading><heading>Proportional Only Discrete Controller</heading>Using the SDS tool available at  URL ..ac.uk/cgi-bin/sds it was possible to simulate the operation of a proportional-only discrete controller using the following steps: The process parameters were set up according to equation 2.1 using the values in section 7. A factor z-1 was factored out of equation 2.6 (to remove the effect of the zero-order hold, which is taken into account by the simulator):  FORMULA  (3.11) The controller parameters were set up according to equation 3.1. The controller gain, Kc, was initially set up as the value of KcMAX calculated in section 9.2 with tL set to 100 seconds to provide a reasonable time interval over which to observe the response, which can be seen in appendix 1, simulation 1. Kc was then reduced to its Ziegler Nichols value, 0.5 Ku, as calculated in section 8.2 and, again, the output was simulated (see appendix 1, simulation 2). <heading>PID Discrete Controller</heading>Again, using the SDS tool, it was possible to simulate the operation of a PID discrete controller. The process parameters were entered in the same way as for the simulations in section 10. For the controller parameters, equation 2.9 was used with controller gain initially set to its Ziegler Nichols value of 0.6 Ku, and tL of 100 seconds again. The response found can be seen in appendix 1, simulation 3. The value of Kc was then adjusted to obtain a response which settled within a reasonable time period (here chosen as under around 30 seconds). Kc was decreased to a value of 2.0, followed by 1.5 then 1.3 and finally 1.2 to obtain a reasonable response. The response obtained with  FORMULA  can be seen in appendix 1, simulation 4. <heading>Dahlin Controller</heading>Finally, using the SDS tool, it was possible to simulate the operation of a Dahlin discrete controller. Again, process parameters remained the same as in section 10, and controller parameters were set up according to equation 2.11. tL was set to a value of 20 seconds to give a reasonable time period over which to observe the response. The output was observed and can be seen in appendix 1, simulation 5. <heading>Conclusions</heading><heading>Discussion of Results</heading><heading>Proportional Only Discrete Controller</heading>The behaviour of the simulated proportional only discrete controller matched very well with the results expected from the preliminary calculations. With the controller gain set at KcMAX, the system output just continuously oscillated, as was expected. When the value of Kc was reduced to 0.5 Ku, the system settled to a final value of around 0.65, again as predicted by the preliminary calculations. The response took around 85 seconds to settle to this value, making it rather less than ideal for a process of this kind. Also, as the controller has only proportional control, the correct final value was not reached leaving an offset between the required and actual final values. <heading>PID Discrete Controller</heading>As with the proportional only discrete controller, the behaviour of the PID discrete controller matched very well with the results expected from the preliminary calculations. With Kc at the analog Ziegler Nichols value of 0.6 Ku, although the graph appears reasonably flat to begin with, examining the scale carefully shows that after 100 seconds the response is varying with orders of magnitude around 10 9. This output is far too unstable to be of any use in a control system, so the value of Kc was reduced until a reasonable response was produced. It was found that a value of Kc of 1.2 produced a response which settled to its final value in under 30 seconds, suggesting that this would be a good value for such a system. Although the controller gain had to be kept lower for stability, the overall performance of the PID discrete controller was clearly better than that of the proportional only discrete controller as the value settled far more quickly to the correct final value. <heading>Dahlin Controller</heading>Again, the behaviour of the simulated Dahlin controller matched very well with the results expected from the preliminary calculations. The closed-loop time constant in the simulated version was found to be Tp, (i.e. the controller settled to 63% of its final value in around 1.96 seconds) as was expected based on the design. One of the most obvious features of the Dahlin controller output is that there is no overshoot and the final value is reached very quickly, in this case in around 12 seconds. <heading>Overall</heading>The proportional only discrete controller was clearly the worst controller design of the three. It took a long time to settle to its final value, and even when it did there was an offset between the required and actual final values. The PID discrete controller was a great improvement; although controller gain had to be kept reasonably low for system stability, the response reached the correct final value and parameters could be adjusted so that the response settled within a reasonable time. Of the three controllers, however, the overall best was clearly the Dahlin controller, which not only settled far quicker than either of the other two designs, but also did not overshoot its final value at all. <heading>Recommendations for Further Work</heading>The investigation could be extended to comparing analog and discrete controller design methods. The initial preliminary calculations carried out were based on analog controllers, however these were not developed into complete systems, nor were they simulated. It would be relatively simple to extend the investigation to include the required calculations and simulations to allow a comparison of analog and discrete controllers. An alternative development could be examining different methods of discrete controller design, which would give a wider range of choices for selecting the "best" controller design method for a system such as this one. Finally, it could also be beneficial to examine non-linear control systems. No real system will be totally linear so it could be interesting to look at how non-linearities would affect the performance of these simulated systems. 